<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-sm-4">
        <h2>Shipment</h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="<%= worker_shipments_path %>">Home</a>
            </li>
            <li class="breadcrumb-item active">
                <strong>Shipment show</strong>
            </li>
        </ol>
    </div>
</div>

<div class="wrapper wrapper-content animated fadeInUp">
    <div class="ibox-content m-b-sm border-bottom">
        <div class="row">
            <div class="col-6">
                <div id="shipment_payment_form">
                    <%= form_tag shipment_payment_worker_payments_path(@shipment), remote: true do %>
                    <%= hidden_field_tag "worker_payment[shipment_id]", @shipment.id, class: 'form-control' %>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group row">
                                <div class="col-sm-10">
                                    <%= number_field_tag "worker_payment[amount_paid]", '', placeholder: 'amount paid', class: 'form-control' %>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-10">
                                    <%= select_tag "worker_payment[payment_type]", options_for_select(['account', 'cash']), class: 'form-control' %>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group row">
                                <div class="col-sm-10">
                                    <%= text_field_tag "worker_payment[note]", '', placeholder: 'Note', class: 'form-control' %>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-4 col-sm-offset-2">
                                    <%= submit_tag "Create payment", class: "btn btn-primary" %>
                                </div>
                            </div>
                        </div>
                    </div>
                    <% end %>
                </div>
            </div>
            <div class="col-6">
                <div id="state_shipment_form">
                    <%= form_with url: state_shipment_worker_shipments_path do |f| %>
                    <%= f.hidden_field :id, value: @shipment.id, class: "form-control" %>
                    <div class="form-group row">
                        <div class="col-sm-10">
                            <%= f.select(:status, ['registered', 'delivering', 'paid', 'done'], {}, { :class => 'form-control' }) %>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-4 col-sm-offset-2">
                            <%= submit_tag "Change status", class: "btn btn-primary" %>
                        </div>
                    </div>
                    <% end %>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="ibox product-detail">
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-5">
                            <div id="carouselExampleInterval" class="carousel slide" data-ride="carousel">
                                <% if @shipment.images.attached? %>
                                    <div class="carousel-inner">
                                        <% i = 0 %>
                                        <% @shipment.images.each do |image| %>
                                            <% if i == 0 %>
                                                <% active = "active" %>
                                            <% else %>
                                                <% active = "" %>
                                            <% end %>
                                            <div class="carousel-item <%= active %>">
                                                <%= image_tag(url_for(image), style: 'height:100%;width:auto;') %>
                                            </div>
                                            <% i = i + 1 %>
                                        <% end %>
                                    </div>
                                <% end %>
                                <a class="slick-prev slick-arrow" href="#carouselExampleInterval" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"><<<</span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="slick-next slick-arrow" href="#carouselExampleInterval" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true">>>></span>
                                    <span class="sr-only">Next</span>
                                </a>
                                <% if @shipment.images.attached? %>
                                    <% i = 0 %>
                                    <ol class="carousel-indicators">
                                        <% @shipment.images.each do |image| %>
                                            <% if i == 0 %>
                                            <% active = "active" %>
                                            <% end %>
                                            <li data-target="#carouselExampleIndicators" data-slide-to="<%= i %>" class="<%= active %>"</li>
                                        <% i = i + 1 %>
                                        <% end %>
                                    </ol>
                                <% end %>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div id="state_shipment">
                                <%= render :partial => 'state_shipment' %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div id="shipment_payments">
                <%= render :partial => 'worker/payments/shipment_payment' %>
            </div>
        </div>
    </div>
</div>
